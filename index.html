<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Playground — Interactive Prototypes</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--muted:#9aa4b2;--accent:#60a5fa}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{background:linear-gradient(180deg,#071022 0%, #081625 60%);color:#e6eef8;padding:32px}
    header{display:flex;align-items:center;gap:16px;flex-wrap:wrap;margin-bottom:20px}
    h1{margin:0;font-size:20px}
    p.lead{margin:0;color:var(--muted)}
    .search-row{margin-left:auto;display:flex;gap:8px;align-items:center}
    .search{background:var(--card);border:1px solid rgba(255,255,255,0.04);padding:8px 12px;border-radius:10px;color:inherit;min-width:240px}
    .search:focus{outline:2px solid rgba(96,165,250,0.18)}

    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:16px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
    .card h3{margin:0 0 8px 0;font-size:16px}
    .meta{color:var(--muted);font-size:13px;margin-bottom:10px}
    .tags{display:flex;gap:6px;flex-wrap:wrap}
    .tag{background:rgba(255,255,255,0.02);color:var(--muted);padding:4px 8px;border-radius:999px;font-size:12px}

    /* Small interactive areas */
    .mini{background:#07101a;border-radius:8px;padding:10px;border:1px solid rgba(255,255,255,0.02)}
    .controls{display:flex;gap:8px;align-items:center}
    button{background:transparent;border:1px solid rgba(255,255,255,0.06);color:inherit;padding:6px 8px;border-radius:8px;cursor:pointer}

    .no-results{color:var(--muted);padding:20px;text-align:center}

    footer{margin-top:20px;color:var(--muted);font-size:13px}
    @media (max-width:420px){body{padding:16px}.search{min-width:140px}}
  </style>
</head>
<body>
  <header>
    <div>
      <h1>Playground</h1>
      <p class="lead">Small interactive apps and prototypes — search, open, and try.</p>
    </div>

    <div class="search-row">
      <label for="q" style="display:none">Search playground</label>
      <input id="q" class="search" placeholder="Search apps, tags, descriptions..." aria-label="Search playground" />
    </div>
  </header>

  <main>
    <div id="grid" class="grid">
      <!-- Card: Color Mixer -->
      <article class="card" data-title="Color Mixer" data-desc="Mix RGB channels and copy CSS color" data-tags="color,rgb,css">
        <h3>Color Mixer</h3>
        <div class="meta">Try mixing RGB and copy the hex color</div>
        <div class="mini" aria-hidden="false">
          <div class="controls" style="margin-bottom:8px">
            <label style="font-size:13px">R <input type="range" min="0" max="255" value="120" data-role="r" /></label>
            <label style="font-size:13px">G <input type="range" min="0" max="255" value="160" data-role="g" /></label>
            <label style="font-size:13px">B <input type="range" min="0" max="255" value="200" data-role="b" /></label>
          </div>
          <div style="display:flex;gap:8px;align-items:center">
            <div id="swatch" style="width:64px;height:38px;border-radius:6px;border:1px solid rgba(255,255,255,0.03)"></div>
            <input id="hex" readonly style="background:transparent;border:none;color:inherit;font-weight:600" />
            <button id="copyColor">Copy</button>
          </div>
        </div>
        <div class="tags" aria-hidden="true">
          <span class="tag">color</span><span class="tag">rgb</span><span class="tag">css</span>
        </div>
      </article>

      <!-- Card: Sketch Canvas -->
      <article class="card" data-title="Sketch Canvas" data-desc="Small canvas sketchpad" data-tags="canvas,draw,sketch">
        <h3>Sketch Canvas</h3>
        <div class="meta">Draw with mouse or touch. Double-click to clear.</div>
        <div class="mini">
          <canvas id="sketch" width="400" height="200" style="width:100%;height:120px;border-radius:6px;display:block;background:#061016"></canvas>
          <div style="display:flex;gap:8px;margin-top:8px"><button id="clearSketch">Clear</button><button id="toggleDraw">Toggle Draw</button></div>
        </div>
        <div class="tags"><span class="tag">canvas</span><span class="tag">draw</span></div>
      </article>

      <!-- Card: Counter -->
      <article class="card" data-title="Counter" data-desc="Simple increment/decrement counter" data-tags="counter,ui,small">
        <h3>Counter</h3>
        <div class="meta">Lightweight state demo with keyboard support.</div>
        <div class="mini" style="display:flex;align-items:center;justify-content:space-between">
          <div style="font-size:18px;font-weight:700" id="count">0</div>
          <div style="display:flex;gap:8px">
            <button id="dec">-</button>
            <button id="inc">+</button>
          </div>
        </div>
        <div class="tags"><span class="tag">counter</span><span class="tag">state</span></div>
      </article>

      <!-- Card: The Cost of Insecurity -->
      <article class="card" data-title="The Cost of Insecurity" data-desc="Interactive lesson: why security must be integrated early" data-tags="security,education,cia">
        <h3>The Cost of Insecurity</h3>
        <div class="meta">Interactive educational module (cost curves, CIA sorter, mini-games)</div>
        <div class="mini">
          <div class="small" style="margin-bottom:8px">Click to open the full lesson in a new tab.</div>
          <div style="display:flex;gap:8px"><a href="cost-of-insecurity.html" target="_blank" style="color:var(--accent);text-decoration:none">Open Lesson</a></div>
        </div>
        <div class="tags"><span class="tag">security</span><span class="tag">education</span><span class="tag">CIA</span></div>
      </article>
    </div>

    <div id="noResults" class="no-results" hidden>No matching apps found.</div>
  </main>

  <footer>Tip: use <kbd>Tab</kbd> to focus the search and type to filter cards.</footer>

  <script>
    // Debounce helper
    function debounce(fn, wait){let t;return (...a)=>{clearTimeout(t);t=setTimeout(()=>fn(...a),wait)}}

    // Search/filtering
    const q = document.getElementById('q');
    const grid = document.getElementById('grid');
    const cards = Array.from(grid.querySelectorAll('.card'));
    const noResults = document.getElementById('noResults');

    function normalize(s){return (s||'').toString().toLowerCase()}

    function matches(card, term){
      if(!term) return true;
      const title = normalize(card.dataset.title);
      const desc = normalize(card.dataset.desc);
      const tags = normalize(card.dataset.tags);
      return title.includes(term) || desc.includes(term) || tags.includes(term);
    }

    function applyFilter(){
      const term = normalize(q.value.trim());
      let shown = 0;
      cards.forEach(c=>{
        if(matches(c,term)) { c.style.display=''; shown++; }
        else c.style.display='none';
      });
      noResults.hidden = shown>0;
    }

    q.addEventListener('input', debounce(applyFilter,120));

    // Keyboard: focus search on /
    window.addEventListener('keydown', (e)=>{
      if(e.key === '/'){
        const active = document.activeElement;
        if(active && (active.tagName==='INPUT' || active.tagName==='TEXTAREA')) return;
        e.preventDefault(); q.focus(); q.select();
      }
    });

    // ---- Color Mixer logic ----
    (function(){
      const r = grid.querySelector('input[data-role="r"]');
      const g = grid.querySelector('input[data-role="g"]');
      const b = grid.querySelector('input[data-role="b"]');
      const sw = document.getElementById('swatch');
      const hexInput = document.getElementById('hex');
      const copyBtn = document.getElementById('copyColor');

      function toHex(v){return v.toString(16).padStart(2,'0')}
      function update(){
        const R=+r.value, G=+g.value, B=+b.value;
        const hex = `#${toHex(R)}${toHex(G)}${toHex(B)}`;
        sw.style.background = hex;
        hexInput.value = hex;
      }
      [r,g,b].forEach(input=>input.addEventListener('input', update));
      copyBtn.addEventListener('click', ()=>navigator.clipboard?.writeText(hexInput.value));
      update();
    })();

    // ---- Sketch Canvas logic ----
    (function(){
      const canvas = document.getElementById('sketch');
      const ctx = canvas.getContext('2d');
      let drawing = true;
      let down = false;
      ctx.strokeStyle = '#60a5fa'; ctx.lineWidth = 2; ctx.lineCap = 'round';
      function resize(){
        const ratio = window.devicePixelRatio || 1;
        const w = canvas.clientWidth; const h = canvas.clientHeight;
        canvas.width = Math.floor(w*ratio); canvas.height = Math.floor(h*ratio);
        ctx.scale(ratio,ratio);
      }
      function pos(e){
        const rect = canvas.getBoundingClientRect();
        const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
        const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
        return {x,y};
      }
      function start(e){ if(!drawing) return; down=true; const p=pos(e); ctx.beginPath(); ctx.moveTo(p.x,p.y); e.preventDefault(); }
      function move(e){ if(!down) return; const p=pos(e); ctx.lineTo(p.x,p.y); ctx.stroke(); }
      function up(){ down=false }
      document.getElementById('clearSketch').addEventListener('click', ()=>{ ctx.clearRect(0,0,canvas.width,canvas.height)});
      document.getElementById('toggleDraw').addEventListener('click', ()=>{ drawing=!drawing; document.getElementById('toggleDraw').textContent = drawing? 'Toggle Draw' : 'Enable Draw' });
      canvas.addEventListener('mousedown', start); canvas.addEventListener('mousemove', move); window.addEventListener('mouseup', up);
      canvas.addEventListener('touchstart', start, {passive:false}); canvas.addEventListener('touchmove', move, {passive:false}); canvas.addEventListener('touchend', up);
      canvas.addEventListener('dblclick', ()=>ctx.clearRect(0,0,canvas.width,canvas.height));
      window.addEventListener('resize', debounce(resize,120)); resize();
    })();

    // ---- Counter ----
    (function(){
      const out = document.getElementById('count');
      let v = 0; function render(){ out.textContent = v }
      document.getElementById('inc').addEventListener('click', ()=>{ v++; render() });
      document.getElementById('dec').addEventListener('click', ()=>{ v--; render() });
      // keyboard: +/- when focused inside card
      out.parentElement.parentElement.addEventListener('keydown',(e)=>{
        if(e.key==='+'){ v++; render() }
        if(e.key==='-'){ v--; render() }
      });
      render();
    })();

    // Accessibility: allow cards to be navigated via tab and be announced
    cards.forEach(c=>{ c.tabIndex = 0; c.setAttribute('role','article'); });
  </script>
</body>
</html>
